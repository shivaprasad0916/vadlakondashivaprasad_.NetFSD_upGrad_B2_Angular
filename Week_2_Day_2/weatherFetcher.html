<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Weather Data Fetcher</title>
</head>
<body>
    <h2>Weather Data Fetcher</h2>
    <button onclick="getWeatherWithPromises()">Fetch (Promises)</button>
    <button onclick="getWeatherAsync()">Fetch (Async/Await)</button>
    <script type="module">

        // Coordinates for Hyderabad (You can change city)
        const latitude = 17.3850;
        const longitude = 78.4867;
        const API_URL = 
        `https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current_weather=true`;

        /* VERSION 1: Using Promises (.then)   */
        const getWeatherWithPromises = () => {

            fetch(API_URL)
                .then(response => {
                    if (!response.ok) {
                        throw new Error("Network response was not OK");
                    }
                    return response.json();
                })
                .then(data => {
                    displayWeather(data.current_weather);
                })
                .catch(error => {
                    console.error("Error fetching weather:", error.message);
                });
        };

        /* VERSION 2: Using async/await */
        const getWeatherAsync = async () => {
            try {
                const response = await fetch(API_URL);

                if (!response.ok) {
                    throw new Error("Network response was not OK");
                }

                const data = await response.json();

                displayWeather(data.current_weather);
            } catch (error) {
                console.error("Error fetching weather:", error.message);
            }
        };

        /* Display Function */
        const displayWeather = (weather) => {
            const report = `
================ WEATHER REPORT ================
Temperature: ${weather.temperature}°C
Wind Speed: ${weather.windspeed} km/h
Wind Direction: ${weather.winddirection}°
Time: ${weather.time}
===============================================
            `;
            console.log(report);
        };

        // Make functions global for buttons
        window.getWeatherWithPromises = getWeatherWithPromises;
        window.getWeatherAsync = getWeatherAsync;
    </script>
</body>
</html>